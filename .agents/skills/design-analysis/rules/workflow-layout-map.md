---
title: 第一步：建立布局 Map
impact: CRITICAL
impactDescription: 设计稿分析第一步，获取整体结构、区域划分与区域间关系
tags: workflow, layout-map, analysis, critical
---

# 第一步：建立布局 Map

## 概述

建立布局 Map 是设计稿分析的第一步，目的是获取设计稿的整体结构，确定页面状态、整体尺寸、区域划分和区域间关系。

## 1.1 获取设计稿结构

### 打开设计稿文件或链接

根据设计稿类型选择工具：

- **.pen（Pencil 设计稿）**：
  - 使用 **Pencil MCP** 查看结构、截图等
  - 可用工具：`snapshot_layout`、`get_screenshot` 等
  - 确认顶层 frame 及多状态（如有）

- **Figma 链接**：
  - 使用 **Figma MCP** 从链接中解析 file key / node id
  - 可用工具：`get_screenshot`、`get_design_context` 等
  - 获取对应 frame 或节点的截图、布局与节点信息

详见 `tools-design-guidelines.md`。

### 扫描顺序

**按「从上到下、再从左到右」扫描**：
- 先按 y 从大到小（或从 0 起向下）确定所有横向区域顺序
- 再在同一行内按 x 从左到右读取
- 使用 Pencil MCP 或 Figma MCP 时也按此顺序逐层获取布局与节点信息

详见 `analysis-order.md`。

## 1.2 必须记录的内容

| 项目 | 说明 |
|------|------|
| 页面/界面状态 | 若有多个 frame（如「有数据 / 无数据」），分别标注 id 与用途 |
| 整体尺寸 | 宽度、高度（如 1440×1150） |
| 区域列表 | **按从上到下（y）排序**：区域名称、x / y / w / h、包含的主要子元素（**含该区内的主要文字、图片**） |
| 区域间间距 | 上一区域底部到下一区域顶部的垂直间距 |
| 主内容区起始 | 相对画布或导航栏的 x/y（如 132, 52） |
| **文字（每区）** | 该区域内所有可见文案：内容、字体、字号、字重、颜色、行高；**不可遗漏**，尤其页面顶部/首屏大字号文案 |
| **图片（每区）** | 该区域内所有图片/占位图/图标区：尺寸、位置、比例、圆角、多图时的布局关系；**不可遗漏** |
| **布局（每区）** | 位置、尺寸、间距、对齐、排列方向、多图拼接方式等；**不可错位或比例失调** |
| **层级（每区）** | 从外到里的嵌套（谁包谁）、父子/兄弟、先后与叠放顺序；**不可丢层或顺序颠倒** |

**注意**：文字、图片、布局、层级是四类重中之重，详见 `analysis-priorities.md`。

## 1.3 布局 Map 模板

```markdown
## 页面布局 Map

### 整体尺寸
- 页面宽度: ___ px
- 页面高度: ___ px

### 页面状态（如有多个）
| 状态 | Frame ID | 说明 |
|------|----------|------|
| 状态1 | id | 说明 |

### 区域列表（按从上到下 y 排序，同层内从左到右）
| 区域 | x | y | w | h | 包含子元素（含主要文字、图片、布局、层级） |
|------|---|---|---|---|------------------------------------------|
| ... |   |   |   |   |                                          |

### 区域间垂直间距
- 区域 A 底部 → 区域 B 顶部: ___ px
```

## 使用示例

### 示例：单状态页面

```markdown
## 页面布局 Map

### 整体尺寸
- 页面宽度: 1440 px
- 页面高度: 1150 px

### 区域列表（按从上到下 y 排序）
| 区域 | x | y | w | h | 包含子元素 |
|------|---|---|---|---|----------|
| 导航栏 | 0 | 0 | 1440 | 80 | Logo、导航菜单、用户头像 |
| 主内容区 | 132 | 80 | 1176 | 970 | 标题、列表、分页 |
| 底部 | 0 | 1050 | 1440 | 100 | 版权信息、链接 |

### 区域间垂直间距
- 导航栏底部 → 主内容区顶部: 0 px（紧贴）
- 主内容区底部 → 底部顶部: 0 px（紧贴）
```

### 示例：多状态页面

```markdown
## 页面布局 Map

### 整体尺寸
- 页面宽度: 1440 px
- 页面高度: 1150 px

### 页面状态（如有多个）
| 状态 | Frame ID | 说明 |
|------|----------|------|
| 有数据 | frame-1 | 显示数据列表 |
| 无数据 | frame-2 | 显示空状态提示 |

### 区域列表（按从上到下 y 排序）
| 区域 | x | y | w | h | 包含子元素 |
|------|---|---|---|---|----------|
| 导航栏 | 0 | 0 | 1440 | 80 | Logo、导航菜单 |
| 主内容区（有数据） | 132 | 80 | 1176 | 970 | 标题、列表、分页 |
| 主内容区（无数据） | 132 | 80 | 1176 | 970 | 空状态图标、提示文字、操作按钮 |
```

## 相关规则

- `analysis-order.md` - 分析顺序（必守）
- `analysis-priorities.md` - 文字、图片、布局、层级四类重中之重
- `tools-design-guidelines.md` - 设计稿工具使用指南
- `workflow-element-extraction.md` - 第二步：区域与元素提取
