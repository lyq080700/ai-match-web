---
alwaysApply: false
description: 项目的路由规范，包括路由目录结构、Next.js App Router 用法、懒加载模式。当新增页面或配置路由时读取此规则。
---

# 路由规范（NON-NEGOTIABLE）

## 路由结构

项目使用 Next.js 16 App Router 模式：

- 路由目录在 `app/` 目录下
- 每个路由页面使用目录 + `page.tsx` 文件
- 路由组使用 `(group)` 命名约定
- 动态路由使用 `[slug]` 命名约定
- 懒加载使用 `lazy` 或 Next.js 的 `dynamic` / `loading.tsx`

### 目录结构示例

```
app/
├── (auth)/                 # 路由组 - 不影响 URL
│   ├── login/
│   │   ├── page.tsx       # /login
│   │   └── loading.tsx
│   └── register/
│       └── page.tsx       # /register
├── (main)/                 # 主业务路由组
│   ├── dashboard/
│   │   ├── page.tsx       # /dashboard
│   │   └── loading.tsx
│   └── profile/
│       ├── [id]/
│       │   └── page.tsx   # /profile/:id
│       └── page.tsx       # /profile
```

## 懒加载模式

在 Next.js App Router 中：

- 组件懒加载：使用 `dynamic` 导入
- 页面懒加载：使用 `loading.tsx` 或 `lazy` 导入
- 路由守卫：在 layout.tsx 中实现

如需查看创建路由的完整示例与落地步骤，请使用技能文件：

- `.agents/skills/create-route/SKILL.md`

## 路由与菜单规范（NON-NEGOTIABLE）

- **禁止多处维护路由**：全局唯一的路由配置文件集中管理，禁止在其他地方写路由配置
- **页面组件职责**：每个 `page.tsx` 只负责页面渲染，业务逻辑提取到 hooks 或 utils
- **布局复用**：使用 layout.tsx 复用布局逻辑
